name = "web2fb-screenshot"
main = "worker.js"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Browser Rendering binding
# This enables Puppeteer in the worker
browser = { binding = "BROWSER" }

# Mark @cloudflare/puppeteer as external (provided by Cloudflare runtime)
[build]
command = ""

[build.upload]
format = "modules"

# Optional: Set API key for authentication
# Run: wrangler secret put API_KEY
# Then use this key in web2fb config

# Worker limits
# Free tier: 100,000 requests/day
# Browser Rendering: $5 per million requests after free tier

[env.production]
name = "web2fb-screenshot"
route = { pattern = "screenshot.unaddressable.org/*", zone_name = "unaddressable.org" }

[env.development]
name = "web2fb-screenshot-dev"
